################################################################################

Results of Fairtest on our medical app.

 - Target Feature = Prediction (correct, false negative, false positive)
 - Sensitive Feature = 'Age' (grouped into 01-30, 31-60, 61-99)
 
For this test, the medical app weights classes (0 or 1+ days in hospital) such
that the proportions of predicted classes roughly matches the proportion of true
classes.

Features names are somewhat cryptic (they are encoded as such in the original 
data). They contain information about a user's medical claims over the last 3
years. The file 'src/medicalMarket Makers - Milestone 1 Description V2 1.pdf'
explains what each feature represents.

Discrimination contexts are sorted by effect size (lower range of the confidence
interval for mutual information). 

################################################################################

Population of size 12732
Context = {'sp9': (-inf, 9.5], 'pcg32': (-inf, 1.5], 'sp6': (0.5, inf)}

+------------+--------------+--------------+--------------+----------------+
| Prediction |  age_01-30   |  age_31-60   |  age_61-99   |     Total      |
+------------+--------------+--------------+--------------+----------------+
|  Correct   | 3374 (83.5%) | 3818 (83.5%) | 2371 (57.6%) |  9563 (75.1%)  |
|     FN     |  388 (9.6%)  | 461 (10.1%)  |  399 (9.7%)  |  1248 (9.8%)   |
|     FP     |  279 (6.9%)  |  293 (6.4%)  | 1349 (32.8%) |  1921 (15.1%)  |
|   Total    | 4041 (31.7%) | 4572 (35.9%) | 4119 (32.4%) | 12732 (100.0%) |
+------------+--------------+--------------+--------------+----------------+

p-value = 3.30e-305 ; MI = [0.0498, 0.0614]
--------------------------------------------------------------------------------

Population of size 2353
Context = {'sp9': (-inf, 9.5], 'pcg5': (2.5, inf), 'pcg32': (-inf, 1.5], 'sp6': (-inf, 0.5], 'pcg13': (-inf, 3.5]}

+------------+-------------+-------------+-------------+---------------+
| Prediction |  age_01-30  |  age_31-60  |  age_61-99  |     Total     |
+------------+-------------+-------------+-------------+---------------+
|  Correct   | 658 (91.5%) | 729 (90.7%) | 573 (69.0%) |  1960 (83.3%) |
|     FN     |  60 (8.3%)  |  57 (7.1%)  | 102 (12.3%) |   219 (9.3%)  |
|     FP     |   1 (0.1%)  |  18 (2.2%)  | 155 (18.7%) |   174 (7.4%)  |
|   Total    | 719 (30.6%) | 804 (34.2%) | 830 (35.3%) | 2353 (100.0%) |
+------------+-------------+-------------+-------------+---------------+

p-value = 1.31e-59 ; MI = [0.0476, 0.0718]
--------------------------------------------------------------------------------

Population of size 12130
Context = {'sp9': (-inf, 9.5], 'pcg32': (-inf, 1.5], 'sp6': (0.5, inf), 'pg7': (-inf, 1.5]}

+------------+--------------+--------------+--------------+----------------+
| Prediction |  age_01-30   |  age_31-60   |  age_61-99   |     Total      |
+------------+--------------+--------------+--------------+----------------+
|  Correct   | 3323 (83.5%) | 3725 (83.4%) | 2120 (57.6%) |  9168 (75.6%)  |
|     FN     |  384 (9.6%)  | 452 (10.1%)  | 368 (10.0%)  |  1204 (9.9%)   |
|     FP     |  275 (6.9%)  |  290 (6.5%)  | 1193 (32.4%) |  1758 (14.5%)  |
|   Total    | 3982 (32.8%) | 4467 (36.8%) | 3681 (30.3%) | 12130 (100.0%) |
+------------+--------------+--------------+--------------+----------------+

p-value = 4.66e-277 ; MI = [0.0472, 0.0588]
--------------------------------------------------------------------------------

Population of size 11786
Context = {'sp9': (-inf, 9.5], 'pcg17': (-inf, 2.5], 'pcg32': (-inf, 1.5], 'sp6': (0.5, inf), 'pg7': (-inf, 1.5]}

+------------+--------------+--------------+--------------+----------------+
| Prediction |  age_01-30   |  age_31-60   |  age_61-99   |     Total      |
+------------+--------------+--------------+--------------+----------------+
|  Correct   | 3280 (83.5%) | 3676 (83.4%) | 2003 (58.1%) |  8959 (76.0%)  |
|     FN     |  378 (9.6%)  | 444 (10.1%)  |  336 (9.7%)  |  1158 (9.8%)   |
|     FP     |  270 (6.9%)  |  288 (6.5%)  | 1111 (32.2%) |  1669 (14.2%)  |
|   Total    | 3928 (33.3%) | 4408 (37.4%) | 3450 (29.3%) | 11786 (100.0%) |
+------------+--------------+--------------+--------------+----------------+

p-value = 2.56e-260 ; MI = [0.0454, 0.0571]
--------------------------------------------------------------------------------

Population of size 335
Context = {'sp9': (-inf, 9.5], 'pcg32': (-inf, 1.5], 'sp6': (-inf, 0.5], 'pcg13': (3.5, inf)}

+------------+------------+-------------+-------------+--------------+
| Prediction | age_01-30  |  age_31-60  |  age_61-99  |    Total     |
+------------+------------+-------------+-------------+--------------+
|  Correct   | 11 (84.6%) | 107 (93.0%) | 139 (67.1%) | 257 (76.7%)  |
|     FN     | 2 (15.4%)  |   7 (6.1%)  |  18 (8.7%)  |  27 (8.1%)   |
|     FP     |  0 (0.0%)  |   1 (0.9%)  |  50 (24.2%) |  51 (15.2%)  |
|   Total    | 13 (3.9%)  | 115 (34.3%) | 207 (61.8%) | 335 (100.0%) |
+------------+------------+-------------+-------------+--------------+

p-value = 8.39e-10 ; MI = [0.0427, 0.1014]
--------------------------------------------------------------------------------

Population of size 602
Context = {'sp9': (-inf, 9.5], 'pcg32': (-inf, 1.5], 'sp6': (0.5, inf), 'pg7': (1.5, inf)}

+------------+------------+-------------+-------------+--------------+
| Prediction | age_01-30  |  age_31-60  |  age_61-99  |    Total     |
+------------+------------+-------------+-------------+--------------+
|  Correct   | 51 (86.4%) |  93 (88.6%) | 251 (57.3%) | 395 (65.6%)  |
|     FN     |  4 (6.8%)  |   9 (8.6%)  |  31 (7.1%)  |  44 (7.3%)   |
|     FP     |  4 (6.8%)  |   3 (2.9%)  | 156 (35.6%) | 163 (27.1%)  |
|   Total    | 59 (9.8%)  | 105 (17.4%) | 438 (72.8%) | 602 (100.0%) |
+------------+------------+-------------+-------------+--------------+

p-value = 6.87e-16 ; MI = [0.0413, 0.0869]
--------------------------------------------------------------------------------

Population of size 325
Context = {'pg2': (-inf, 3.5], 'sp9': (-inf, 9.5], 'pcg32': (-inf, 1.5], 'sp6': (0.5, inf), 'pg7': (1.5, inf)}

+------------+------------+------------+-------------+--------------+
| Prediction | age_01-30  | age_31-60  |  age_61-99  |    Total     |
+------------+------------+------------+-------------+--------------+
|  Correct   | 40 (93.0%) | 60 (90.9%) | 128 (59.3%) | 228 (70.2%)  |
|     FN     |  1 (2.3%)  |  4 (6.1%)  |  15 (6.9%)  |  20 (6.2%)   |
|     FP     |  2 (4.7%)  |  2 (3.0%)  |  73 (33.8%) |  77 (23.7%)  |
|   Total    | 43 (13.2%) | 66 (20.3%) | 216 (66.5%) | 325 (100.0%) |
+------------+------------+------------+-------------+--------------+

p-value = 5.44e-10 ; MI = [0.0409, 0.1103]
--------------------------------------------------------------------------------

Population of size 344
Context = {'sp9': (-inf, 9.5], 'pcg17': (2.5, inf), 'pcg32': (-inf, 1.5], 'sp6': (0.5, inf), 'pg7': (-inf, 1.5]}

+------------+------------+------------+-------------+--------------+
| Prediction | age_01-30  | age_31-60  |  age_61-99  |    Total     |
+------------+------------+------------+-------------+--------------+
|  Correct   | 43 (79.6%) | 49 (83.1%) | 117 (50.6%) | 209 (60.8%)  |
|     FN     | 6 (11.1%)  | 8 (13.6%)  |  32 (13.9%) |  46 (13.4%)  |
|     FP     |  5 (9.3%)  |  2 (3.4%)  |  82 (35.5%) |  89 (25.9%)  |
|   Total    | 54 (15.7%) | 59 (17.2%) | 231 (67.2%) | 344 (100.0%) |
+------------+------------+------------+-------------+--------------+

p-value = 3.87e-09 ; MI = [0.0331, 0.0979]
--------------------------------------------------------------------------------

Population of size 64769
Context = {}

+------------+---------------+---------------+---------------+----------------+
| Prediction |   age_01-30   |   age_31-60   |   age_61-99   |     Total      |
+------------+---------------+---------------+---------------+----------------+
|  Correct   | 14982 (89.4%) | 21973 (90.3%) | 18014 (76.1%) | 54969 (84.9%)  |
|     FN     |  1394 (8.3%)  |  1865 (7.7%)  |  2559 (10.8%) |  5818 (9.0%)   |
|     FP     |   376 (2.2%)  |   493 (2.0%)  |  3113 (13.1%) |  3982 (6.1%)   |
|   Total    | 16752 (25.9%) | 24331 (37.6%) | 23686 (36.6%) | 64769 (100.0%) |
+------------+---------------+---------------+---------------+----------------+

p-value = 0.00e+00 ; MI = [0.0243, 0.0277]
--------------------------------------------------------------------------------

Population of size 64443
Context = {'pcg32': (-inf, 1.5]}

+------------+---------------+---------------+---------------+----------------+
| Prediction |   age_01-30   |   age_31-60   |   age_61-99   |     Total      |
+------------+---------------+---------------+---------------+----------------+
|  Correct   | 14902 (89.5%) | 21875 (90.4%) | 17947 (76.1%) | 54724 (84.9%)  |
|     FN     |  1385 (8.3%)  |  1847 (7.6%)  |  2547 (10.8%) |  5779 (9.0%)   |
|     FP     |   369 (2.2%)  |   487 (2.0%)  |  3084 (13.1%) |  3940 (6.1%)   |
|   Total    | 16656 (25.8%) | 24209 (37.6%) | 23578 (36.6%) | 64443 (100.0%) |
+------------+---------------+---------------+---------------+----------------+

p-value = 0.00e+00 ; MI = [0.0242, 0.0277]
--------------------------------------------------------------------------------

Population of size 64014
Context = {'sp9': (-inf, 9.5], 'pcg32': (-inf, 1.5]}

+------------+---------------+---------------+---------------+----------------+
| Prediction |   age_01-30   |   age_31-60   |   age_61-99   |     Total      |
+------------+---------------+---------------+---------------+----------------+
|  Correct   | 14890 (89.5%) | 21751 (90.4%) | 17770 (76.2%) | 54411 (85.0%)  |
|     FN     |  1385 (8.3%)  |  1835 (7.6%)  |  2511 (10.8%) |  5731 (9.0%)   |
|     FP     |   369 (2.2%)  |   479 (2.0%)  |  3024 (13.0%) |  3872 (6.0%)   |
|   Total    | 16644 (26.0%) | 24065 (37.6%) | 23305 (36.4%) | 64014 (100.0%) |
+------------+---------------+---------------+---------------+----------------+

p-value = 0.00e+00 ; MI = [0.0239, 0.0274]
--------------------------------------------------------------------------------

Population of size 277
Context = {'pg2': (3.5, inf), 'sp9': (-inf, 9.5], 'pcg32': (-inf, 1.5], 'sp6': (0.5, inf), 'pg7': (1.5, inf)}

+------------+------------+------------+-------------+--------------+
| Prediction | age_01-30  | age_31-60  |  age_61-99  |    Total     |
+------------+------------+------------+-------------+--------------+
|  Correct   | 11 (68.8%) | 33 (84.6%) | 123 (55.4%) | 167 (60.3%)  |
|     FN     | 3 (18.8%)  | 5 (12.8%)  |  16 (7.2%)  |  24 (8.7%)   |
|     FP     | 2 (12.5%)  |  1 (2.6%)  |  83 (37.4%) |  86 (31.0%)  |
|   Total    | 16 (5.8%)  | 39 (14.1%) | 222 (80.1%) | 277 (100.0%) |
+------------+------------+------------+-------------+--------------+

p-value = 6.60e-06 ; MI = [0.0230, 0.0830]
--------------------------------------------------------------------------------

Population of size 51282
Context = {'sp9': (-inf, 9.5], 'pcg32': (-inf, 1.5], 'sp6': (-inf, 0.5]}

+------------+---------------+---------------+---------------+----------------+
| Prediction |   age_01-30   |   age_31-60   |   age_61-99   |     Total      |
+------------+---------------+---------------+---------------+----------------+
|  Correct   | 11516 (91.4%) | 17933 (92.0%) | 15399 (80.3%) | 44848 (87.5%)  |
|     FN     |   997 (7.9%)  |  1374 (7.0%)  |  2112 (11.0%) |  4483 (8.7%)   |
|     FP     |   90 (0.7%)   |   186 (1.0%)  |  1675 (8.7%)  |  1951 (3.8%)   |
|   Total    | 12603 (24.6%) | 19493 (38.0%) | 19186 (37.4%) | 51282 (100.0%) |
+------------+---------------+---------------+---------------+----------------+

p-value = 0.00e+00 ; MI = [0.0210, 0.0245]
--------------------------------------------------------------------------------

Population of size 50947
Context = {'sp9': (-inf, 9.5], 'pcg32': (-inf, 1.5], 'sp6': (-inf, 0.5], 'pcg13': (-inf, 3.5]}

+------------+---------------+---------------+---------------+----------------+
| Prediction |   age_01-30   |   age_31-60   |   age_61-99   |     Total      |
+------------+---------------+---------------+---------------+----------------+
|  Correct   | 11505 (91.4%) | 17826 (92.0%) | 15260 (80.4%) | 44591 (87.5%)  |
|     FN     |   995 (7.9%)  |  1367 (7.1%)  |  2094 (11.0%) |  4456 (8.7%)   |
|     FP     |   90 (0.7%)   |   185 (1.0%)  |  1625 (8.6%)  |  1900 (3.7%)   |
|   Total    | 12590 (24.7%) | 19378 (38.0%) | 18979 (37.3%) | 50947 (100.0%) |
+------------+---------------+---------------+---------------+----------------+

p-value = 0.00e+00 ; MI = [0.0204, 0.0239]
--------------------------------------------------------------------------------

Population of size 48594
Context = {'sp9': (-inf, 9.5], 'pcg5': (-inf, 2.5], 'pcg32': (-inf, 1.5], 'sp6': (-inf, 0.5], 'pcg13': (-inf, 3.5]}

+------------+---------------+---------------+---------------+----------------+
| Prediction |   age_01-30   |   age_31-60   |   age_61-99   |     Total      |
+------------+---------------+---------------+---------------+----------------+
|  Correct   | 10847 (91.4%) | 17097 (92.0%) | 14687 (80.9%) | 42631 (87.7%)  |
|     FN     |   935 (7.9%)  |  1310 (7.1%)  |  1992 (11.0%) |  4237 (8.7%)   |
|     FP     |   89 (0.7%)   |   167 (0.9%)  |  1470 (8.1%)  |  1726 (3.6%)   |
|   Total    | 11871 (24.4%) | 18574 (38.2%) | 18149 (37.3%) | 48594 (100.0%) |
+------------+---------------+---------------+---------------+----------------+

p-value = 0.00e+00 ; MI = [0.0190, 0.0225]
--------------------------------------------------------------------------------

Population of size 429
Context = {'sp9': (9.5, inf), 'pcg32': (-inf, 1.5]}

+------------+-------------+-------------+-------------+--------------+
| Prediction |  age_01-30  |  age_31-60  |  age_61-99  |    Total     |
+------------+-------------+-------------+-------------+--------------+
|  Correct   | 12 (100.0%) | 124 (86.1%) | 177 (64.8%) | 313 (73.0%)  |
|     FN     |   0 (0.0%)  |  12 (8.3%)  |  36 (13.2%) |  48 (11.2%)  |
|     FP     |   0 (0.0%)  |   8 (5.6%)  |  60 (22.0%) |  68 (15.9%)  |
|   Total    |  12 (2.8%)  | 144 (33.6%) | 273 (63.6%) | 429 (100.0%) |
+------------+-------------+-------------+-------------+--------------+

p-value = 7.21e-07 ; MI = [0.0175, 0.0619]
--------------------------------------------------------------------------------

Population of size 326
Context = {'pcg32': (1.5, inf)}

+------------+------------+-------------+-------------+--------------+
| Prediction | age_01-30  |  age_31-60  |  age_61-99  |    Total     |
+------------+------------+-------------+-------------+--------------+
|  Correct   | 80 (83.3%) |  98 (80.3%) |  67 (62.0%) | 245 (75.2%)  |
|     FN     |  9 (9.4%)  |  18 (14.8%) |  12 (11.1%) |  39 (12.0%)  |
|     FP     |  7 (7.3%)  |   6 (4.9%)  |  29 (26.9%) |  42 (12.9%)  |
|   Total    | 96 (29.4%) | 122 (37.4%) | 108 (33.1%) | 326 (100.0%) |
+------------+------------+-------------+-------------+--------------+

p-value = 1.07e-05 ; MI = [0.0116, 0.0753]
--------------------------------------------------------------------------------